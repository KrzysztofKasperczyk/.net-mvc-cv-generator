@* Views/Cv/_CustomSection.cshtml *@
@model CvGenerator.Models.CustomSection

@* Expect ViewData.TemplateInfo.HtmlFieldPrefix = "Custom" or similar *@
<div class="card mb-4 custom-section-item">
  <div class="card-header d-flex justify-content-between align-items-center">
    <strong>Custom Section</strong>
    <button type="button" class="btn-close remove-custom-section" aria-label="Remove section"></button>
  </div>
  <div class="card-body">
    <!-- Section Title -->
    <div class="mb-4">
      <label asp-for="Title" class="form-label">Section Title</label>
      <input asp-for="Title"
             class="form-control"
             placeholder="e.g. Certifications, Volunteer Work…" />
      <span asp-validation-for="Title" class="text-danger"></span>
    </div>

    <hr />

    <!-- Field Builder -->
    <h6 class="mb-3">Add a Field</h6>
    <div class="row g-2 align-items-end">
      <div class="col-md-3">
        <label class="form-label">Field Type</label>
        <select id="new-field-type" class="form-select">
          <option value="Text">Single-line Text</option>
          <option value="TextArea">Multi-line Text</option>
          <option value="Number">Number</option>
          <option value="Date">Date</option>
        </select>
      </div>
      <div class="col-md-4">
        <label class="form-label">Label</label>
        <input id="new-field-label" type="text" class="form-control" placeholder="Field label…" />
      </div>
      <div class="col-md-3">
        <label class="form-label">Max Length</label>
        <input id="new-field-maxlength" type="number" min="1" class="form-control" placeholder="optional" />
      </div>
      <div class="col-md-2">
        <button id="add-custom-field" class="btn btn-primary w-100">
          Add Field
        </button>
      </div>
    </div>

    <!-- Defined Fields List -->
    <ul id="custom-field-list" class="list-group my-4"></ul>

    <!-- Live Preview -->
    <h6 class="mb-2">Preview</h6>
    <div id="custom-form-fields" class="mb-3"></div>

    <!-- Hidden JSON for model binding -->
    <input type="hidden"
       name="@($"{ViewData.TemplateInfo.HtmlFieldPrefix}.FieldsJson")"
       id="Custom_FieldsJson" />

<input type="hidden"
       name="@($"{ViewData.TemplateInfo.HtmlFieldPrefix}.ValuesJson")"
       id="Custom_ValuesJson" />

  </div>
</div>
